{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/GREESHRAJ PATAIRIYA/Desktop/Temp/Kgpian_chat/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/GREESHRAJ PATAIRIYA/Desktop/Temp/Kgpian_chat/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"C:/Users/GREESHRAJ PATAIRIYA/Desktop/Temp/Kgpian_chat/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/GREESHRAJ PATAIRIYA/Desktop/Temp/Kgpian_chat/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/GREESHRAJ PATAIRIYA/Desktop/Temp/Kgpian_chat/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Button,FormControl,FormLabel,Input,InputGroup,InputRightElement,Stack,useToast}from\"@chakra-ui/react\";import{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),show=_useState2[0],setShow=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var toast=useToast();var navigate=useNavigate();var _useState5=useState({email:\"\",password:\"\"}),_useState6=_slicedToArray(_useState5,2),credentials=_useState6[0],setCredentials=_useState6[1];var handleCredentials=function handleCredentials(e){setCredentials(_objectSpread(_objectSpread({},credentials),{},_defineProperty({},e.target.name,e.target.value)));};var submitHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);// If email or password is missing\nif(!(!credentials.email||!credentials.password)){_context.next=5;break;}toast({title:\"Please Fill all the Feilds\",status:\"warning\",duration:5000,isClosable:true,position:\"bottom-right\",variant:\"left-accent\"});setLoading(false);return _context.abrupt(\"return\");case 5:_context.prev=5;_context.next=8;return fetch(\"/api/user/login\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email:credentials.email,password:credentials.password})});case 8:response=_context.sent;_context.next=11;return response.json();case 11:data=_context.sent;toast({title:data.message,status:!data.success?\"error\":\"success\",duration:5000,isClosable:true,position:\"bottom-right\",variant:!data.success?\"left-accent\":\"solid\"});if(data.success){localStorage.setItem(\"userInfo\",JSON.stringify(data));setLoading(false);navigate(\"/chats\");}else{setLoading(false);}_context.next=20;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](5);setLoading(false);return _context.abrupt(\"return\",toast({title:\"Internal server error\",status:\"error\",duration:5000,isClosable:true,position:\"bottom-right\",variant:\"solid\"}));case 20:case\"end\":return _context.stop();}}},_callee,null,[[5,16]]);}));return function submitHandler(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Stack,{spacing:\"6\",children:[/*#__PURE__*/_jsx(Stack,{spacing:\"5\",children:/*#__PURE__*/_jsxs(FormControl,{isRequired:true,children:[/*#__PURE__*/_jsx(FormLabel,{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(Input,{type:\"email\",name:\"email\",value:credentials.email,placeholder:\"Enter Your Email id\",onChange:function onChange(e){return handleCredentials(e);}})]})}),/*#__PURE__*/_jsx(Stack,{spacing:\"5\",children:/*#__PURE__*/_jsxs(FormControl,{isRequired:true,children:[/*#__PURE__*/_jsx(FormLabel,{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsxs(InputGroup,{children:[/*#__PURE__*/_jsx(InputRightElement,{w:\"4.5rem\"}),/*#__PURE__*/_jsx(Input,{type:show?\"text\":\"password\",name:\"password\",value:credentials.password,placeholder:\"Password\",onChange:function onChange(e){return handleCredentials(e);}})]})]})}),/*#__PURE__*/_jsx(Button,{colorScheme:\"blue\",width:\"20%\",style:{marginTop:15},onClick:submitHandler,isLoading:loading,children:\"Login\"})]});};export default Login;","map":{"version":3,"names":["Button","FormControl","FormLabel","Input","InputGroup","InputRightElement","Stack","useToast","useState","useNavigate","Login","show","setShow","loading","setLoading","toast","navigate","email","password","credentials","setCredentials","handleCredentials","e","target","name","value","submitHandler","title","status","duration","isClosable","position","variant","fetch","method","headers","body","JSON","stringify","response","json","data","message","success","localStorage","setItem","marginTop"],"sources":["C:/Users/GREESHRAJ PATAIRIYA/Desktop/Temp/Kgpian_chat/client/src/components/Authentication/Login.jsx"],"sourcesContent":["import {Button,FormControl,FormLabel,Input,InputGroup,InputRightElement,Stack,useToast} from \"@chakra-ui/react\";\r\nimport { useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst Login = () => {\r\n  const [show, setShow] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const toast = useToast();\r\n  const navigate = useNavigate();\r\n\r\n  const [credentials, setCredentials] = useState({\r\n    email: \"\",\r\n    password: \"\",\r\n  });\r\n\r\n  const handleCredentials = (e) => {\r\n    setCredentials({ ...credentials, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const submitHandler = async () => {\r\n    setLoading(true);\r\n\r\n    // If email or password is missing\r\n    if (!credentials.email || !credentials.password) {\r\n      toast({\r\n        title: \"Please Fill all the Feilds\",\r\n        status: \"warning\",\r\n        duration: 5000,\r\n        isClosable: true,\r\n        position: \"bottom-right\",\r\n        variant: \"left-accent\",\r\n      });\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await fetch(\"/api/user/login\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          email: credentials.email,\r\n          password: credentials.password,\r\n        }),\r\n      });\r\n      const data = await response.json();\r\n\r\n      toast({\r\n        title: data.message,\r\n        status: !data.success ? \"error\" : \"success\",\r\n        duration: 5000,\r\n        isClosable: true,\r\n        position: \"bottom-right\",\r\n        variant: !data.success ? \"left-accent\" : \"solid\",\r\n      });\r\n\r\n      if (data.success) {\r\n        localStorage.setItem(\"userInfo\", JSON.stringify(data));\r\n        setLoading(false);\r\n        navigate(\"/chats\");\r\n      } else {\r\n        setLoading(false);\r\n      }\r\n    } catch (error) {\r\n      setLoading(false);\r\n      return toast({\r\n        title: \"Internal server error\",\r\n        status: \"error\",\r\n        duration: 5000,\r\n        isClosable: true,\r\n        position: \"bottom-right\",\r\n        variant: \"solid\",\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Stack spacing=\"6\">\r\n      <Stack spacing=\"5\">\r\n        <FormControl isRequired>\r\n          <FormLabel htmlFor=\"email\">Email</FormLabel>\r\n          <Input\r\n            type=\"email\"\r\n            name=\"email\"\r\n            value={credentials.email}\r\n            placeholder=\"Enter Your Email id\"\r\n            onChange={(e) => handleCredentials(e)}\r\n          />\r\n        </FormControl>\r\n      </Stack>\r\n\r\n      <Stack spacing=\"5\">\r\n        <FormControl isRequired>\r\n          <FormLabel htmlFor=\"password\">Password</FormLabel>\r\n          <InputGroup>\r\n            <InputRightElement w=\"4.5rem\">\r\n              {/* <Button h=\"1.75rem\" size=\"sm\" onClick={() => setShow(!show)}>\r\n                {show ? \"Hide\" : \"Show\"}\r\n              </Button> */}\r\n            </InputRightElement>\r\n            <Input\r\n              type={show ? \"text\" : \"password\"}\r\n              name=\"password\"\r\n              value={credentials.password}\r\n              placeholder=\"Password\"\r\n              onChange={(e) => handleCredentials(e)}\r\n            />\r\n          </InputGroup>\r\n        </FormControl>\r\n      </Stack>\r\n\r\n      <Button\r\n        colorScheme=\"blue\"\r\n        width=\"20%\"\r\n        style={{ marginTop: 15 }}\r\n        onClick={submitHandler}\r\n        isLoading={loading}\r\n      >\r\n        Login\r\n      </Button>\r\n\r\n      {/* <Button\r\n        variant=\"solid\"\r\n        colorScheme=\"red\"\r\n        width=\"100%\"\r\n        onClick={() => {\r\n          setCredentials({ email: \"guest@example.com\", password: \"12345678\" });\r\n        }}\r\n      >\r\n        <i\r\n          className=\"fas fa-user-alt\"\r\n          style={{ fontSize: \"15px\", marginRight: 8 }}\r\n        /> Get Guest User Credentials\r\n      </Button> */}\r\n    </Stack>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}