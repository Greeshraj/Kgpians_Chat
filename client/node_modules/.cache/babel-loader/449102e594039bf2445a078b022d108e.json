{"ast":null,"code":"import{Avatar,Tooltip}from\"@chakra-ui/react\";import{useEffect,useRef}from\"react\";import Lottie from\"lottie-react\";import\"../App.css\";import{isLastMessage,isSameSender,isSameSenderMargin,isSameUser}from\"../config/ChatLogics\";import{ChatState}from\"../context/ChatProvider\";import typingAnimation from\"../animations/typing.json\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ScrollableChat=function ScrollableChat(_ref){var messages=_ref.messages,isTyping=_ref.isTyping;var _ChatState=ChatState(),user=_ChatState.user;var scrollRef=useRef();useEffect(function(){var _scrollRef$current;// Scroll to the bottom when messeges render or sender is typing\n(_scrollRef$current=scrollRef.current)===null||_scrollRef$current===void 0?void 0:_scrollRef$current.scrollIntoView({behavior:\"smooth\",block:\"end\"});},[messages,isTyping]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"hide-scrollbar\",style:{overflowX:\"hidden\",overflowY:\"auto\"},children:messages&&messages.map(function(message,index){return/*#__PURE__*/_jsxs(\"div\",{ref:scrollRef,style:{display:\"flex\"},children:[(isSameSender(messages,message,index,user._id)||isLastMessage(messages,index,user._id))&&/*#__PURE__*/_jsx(Tooltip,{label:message.sender.name,placement:\"bottom-start\",hasArrow:true,children:/*#__PURE__*/_jsx(Avatar,{mt:\"7px\",mr:\"1\",size:\"sm\",cursor:\"pointer\",name:message.sender.name,src:message.sender.pic})}),/*#__PURE__*/_jsx(\"span\",{style:{backgroundColor:\"\".concat(message.sender._id===user._id?\"#BEE3F8\":\"#B9F5D0\"),borderRadius:\"20px\",padding:\"5px 15px\",maxWidth:\"75%\",marginLeft:isSameSenderMargin(messages,message,index,user._id),marginTop:isSameUser(messages,message,index,user._id)?3:10},children:message.content})]},message._id);})}),isTyping?/*#__PURE__*/_jsx(\"div\",{style:{width:\"70px\",marginTop:\"5px\"},children:/*#__PURE__*/_jsx(Lottie,{animationData:typingAnimation,loop:true})}):/*#__PURE__*/_jsx(_Fragment,{})]});};export default ScrollableChat;","map":{"version":3,"names":["Avatar","Tooltip","useEffect","useRef","Lottie","isLastMessage","isSameSender","isSameSenderMargin","isSameUser","ChatState","typingAnimation","ScrollableChat","messages","isTyping","user","scrollRef","current","scrollIntoView","behavior","block","overflowX","overflowY","map","message","index","display","_id","sender","name","pic","backgroundColor","borderRadius","padding","maxWidth","marginLeft","marginTop","content","width"],"sources":["C:/Users/GREESHRAJ PATAIRIYA/Desktop/Temp/Kgpian_chat/client/src/components/ScrollableChat.jsx"],"sourcesContent":["import { Avatar, Tooltip } from \"@chakra-ui/react\";\r\nimport { useEffect, useRef } from \"react\";\r\nimport Lottie from \"lottie-react\";\r\n\r\nimport \"../App.css\";\r\nimport {\r\n  isLastMessage,\r\n  isSameSender,\r\n  isSameSenderMargin,\r\n  isSameUser,\r\n} from \"../config/ChatLogics\";\r\nimport { ChatState } from \"../context/ChatProvider\";\r\nimport typingAnimation from \"../animations/typing.json\";\r\n\r\nconst ScrollableChat = ({ messages, isTyping }) => {\r\n  const { user } = ChatState();\r\n\r\n  const scrollRef = useRef();\r\n\r\n  useEffect(() => {\r\n    // Scroll to the bottom when messeges render or sender is typing\r\n    scrollRef.current?.scrollIntoView({ behavior: \"smooth\", block: \"end\" });\r\n  }, [messages, isTyping]);\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        className=\"hide-scrollbar\"\r\n        style={{ overflowX: \"hidden\", overflowY: \"auto\" }}\r\n      >\r\n        {/* If something inside the messages, render the messages */}\r\n        {messages &&\r\n          messages.map((message, index) => (\r\n            <div ref={scrollRef} key={message._id} style={{ display: \"flex\" }}>\r\n              {(isSameSender(messages, message, index, user._id) ||\r\n                isLastMessage(messages, index, user._id)) && (\r\n                <Tooltip\r\n                  label={message.sender.name}\r\n                  placement=\"bottom-start\"\r\n                  hasArrow\r\n                >\r\n                  <Avatar\r\n                    mt=\"7px\"\r\n                    mr=\"1\"\r\n                    size=\"sm\"\r\n                    cursor=\"pointer\"\r\n                    name={message.sender.name}\r\n                    src={message.sender.pic}\r\n                  />\r\n                </Tooltip>\r\n              )}\r\n\r\n              <span\r\n                style={{\r\n                  backgroundColor: `${\r\n                    message.sender._id === user._id ? \"#BEE3F8\" : \"#B9F5D0\"\r\n                  }`,\r\n                  borderRadius: \"20px\",\r\n                  padding: \"5px 15px\",\r\n                  maxWidth: \"75%\",\r\n\r\n                  marginLeft: isSameSenderMargin(\r\n                    messages,\r\n                    message,\r\n                    index,\r\n                    user._id\r\n                  ),\r\n                  marginTop: isSameUser(messages, message, index, user._id)\r\n                    ? 3\r\n                    : 10,\r\n                }}\r\n              >\r\n                {message.content}\r\n              </span>\r\n            </div>\r\n          ))}\r\n      </div>\r\n      {isTyping ? (\r\n        <div style={{ width: \"70px\", marginTop: \"5px\" }}>\r\n          <Lottie animationData={typingAnimation} loop={true} />\r\n        </div>\r\n      ) : (\r\n        <></>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ScrollableChat;\r\n"],"mappings":"AAAA,OAASA,MAAM,CAAEC,OAAO,KAAQ,kBAAkB,CAClD,OAASC,SAAS,CAAEC,MAAM,KAAQ,OAAO,CACzC,MAAOC,OAAM,KAAM,cAAc,CAEjC,MAAO,YAAY,CACnB,OACEC,aAAa,CACbC,YAAY,CACZC,kBAAkB,CAClBC,UAAU,KACL,sBAAsB,CAC7B,OAASC,SAAS,KAAQ,yBAAyB,CACnD,MAAOC,gBAAe,KAAM,2BAA2B,CAAC,6IAExD,GAAMC,eAAc,CAAG,QAAjBA,eAAc,MAA+B,IAAzBC,SAAQ,MAARA,QAAQ,CAAEC,QAAQ,MAARA,QAAQ,CAC1C,eAAiBJ,SAAS,EAAE,CAApBK,IAAI,YAAJA,IAAI,CAEZ,GAAMC,UAAS,CAAGZ,MAAM,EAAE,CAE1BD,SAAS,CAAC,UAAM,wBACd;AACA,oBAAAa,SAAS,CAACC,OAAO,6CAAjB,mBAAmBC,cAAc,CAAC,CAAEC,QAAQ,CAAE,QAAQ,CAAEC,KAAK,CAAE,KAAM,CAAC,CAAC,CACzE,CAAC,CAAE,CAACP,QAAQ,CAAEC,QAAQ,CAAC,CAAC,CAExB,mBACE,wCACE,YACE,SAAS,CAAC,gBAAgB,CAC1B,KAAK,CAAE,CAAEO,SAAS,CAAE,QAAQ,CAAEC,SAAS,CAAE,MAAO,CAAE,UAGjDT,QAAQ,EACPA,QAAQ,CAACU,GAAG,CAAC,SAACC,OAAO,CAAEC,KAAK,qBAC1B,aAAK,GAAG,CAAET,SAAU,CAAmB,KAAK,CAAE,CAAEU,OAAO,CAAE,MAAO,CAAE,WAC/D,CAACnB,YAAY,CAACM,QAAQ,CAAEW,OAAO,CAAEC,KAAK,CAAEV,IAAI,CAACY,GAAG,CAAC,EAChDrB,aAAa,CAACO,QAAQ,CAAEY,KAAK,CAAEV,IAAI,CAACY,GAAG,CAAC,gBACxC,KAAC,OAAO,EACN,KAAK,CAAEH,OAAO,CAACI,MAAM,CAACC,IAAK,CAC3B,SAAS,CAAC,cAAc,CACxB,QAAQ,4BAER,KAAC,MAAM,EACL,EAAE,CAAC,KAAK,CACR,EAAE,CAAC,GAAG,CACN,IAAI,CAAC,IAAI,CACT,MAAM,CAAC,SAAS,CAChB,IAAI,CAAEL,OAAO,CAACI,MAAM,CAACC,IAAK,CAC1B,GAAG,CAAEL,OAAO,CAACI,MAAM,CAACE,GAAI,EACxB,EAEL,cAED,aACE,KAAK,CAAE,CACLC,eAAe,WACbP,OAAO,CAACI,MAAM,CAACD,GAAG,GAAKZ,IAAI,CAACY,GAAG,CAAG,SAAS,CAAG,SAAS,CACvD,CACFK,YAAY,CAAE,MAAM,CACpBC,OAAO,CAAE,UAAU,CACnBC,QAAQ,CAAE,KAAK,CAEfC,UAAU,CAAE3B,kBAAkB,CAC5BK,QAAQ,CACRW,OAAO,CACPC,KAAK,CACLV,IAAI,CAACY,GAAG,CACT,CACDS,SAAS,CAAE3B,UAAU,CAACI,QAAQ,CAAEW,OAAO,CAAEC,KAAK,CAAEV,IAAI,CAACY,GAAG,CAAC,CACrD,CAAC,CACD,EACN,CAAE,UAEDH,OAAO,CAACa,OAAO,EACX,GAxCiBb,OAAO,CAACG,GAAG,CAyC/B,EACP,CAAC,EACA,CACLb,QAAQ,cACP,YAAK,KAAK,CAAE,CAAEwB,KAAK,CAAE,MAAM,CAAEF,SAAS,CAAE,KAAM,CAAE,uBAC9C,KAAC,MAAM,EAAC,aAAa,CAAEzB,eAAgB,CAAC,IAAI,CAAE,IAAK,EAAG,EAClD,cAEN,kBACD,GACA,CAEP,CAAC,CAED,cAAeC,eAAc"},"metadata":{},"sourceType":"module"}